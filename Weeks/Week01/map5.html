<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Quick Start Guide Example</title>
	<meta charset="utf-8" />

	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin="anonymous"></script>

	<!-- jquery -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

	<!-- stylesheets -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="anonymous" />
	<link rel="stylesheet" href="css/style.css">

</head>
<body>

	<div class="header"></div>
	<div class="sidebar"></div>
	<div class="content">

		<div id="map"></div>

		<script>

			// create a container variable for the data
			let data = []

			// url for earthquakes
			const url='https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_day.geojson'
			$.getJSON(url,function(d){
				data = d.features
			}).done(function(){
				initMap()
			})

			// function to start the map and add the data
			function initMap(){
				let map = L.map('map').setView([34,-117], 2);
				L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
				}).addTo(map);
				
				// loop through data
				data.forEach(function(item,index){
					// add marker to map
					L.marker([item.geometry.coordinates[1],item.geometry.coordinates[0]]).addTo(map)
						.bindPopup(item.properties.place)
						.openPopup();	

					// add marker to sidebar
					$('.sidebar').append('<div class="sidebar-item" onclick="goto('+index+')">'+item.properties.place+'</div>')
				})
				
			}

			// function goto(id){
			// 	console.log(id)
			// 	map.flyTo([data[id].lat,data[id].lon],10)
			// }

		</script>	

	</div>

</body>
</html>
